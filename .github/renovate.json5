{
  "extends": [
    "github>newrelic/coreint-automation:renovate-base.json5"
  ],
  "regexManagers": [
    {
      "fileMatch": [
        "^\\.github/workflows/push_pr.yml$",
        "^\\.github/workflows/prerelease.yml$"
      ],
      "matchStrings": [
        "NRJMX_VERSION\\s*[:=]\\s*[\"']?(?<currentValue>\\d+\\.\\d+\\.\\d+)[\"']?"
      ],
      "depNameTemplate": "newrelic/nrjmx",
      "datasourceTemplate": "github-releases",
      "versioningTemplate": "semver"
    }
  ],
  "packageRules": [
    {
        "matchDatasources": ["nrjmx-version"],
        "rangeStrategy": "bump"
    },
    {
      "description": "Automerge minor and patch updates for NRJMX_VERSION",
      "matchDatasources": ["github-releases"],
      "matchPackageNames": ["newrelic/nrjmx"],
      "fileMatch": [
        "^\\.github/workflows/push_pr\\.yml$",
        "^\\.github/workflows/prerelease\\.yml$"
      ],
      "matchUpdateTypes": ["minor", "patch"],
      "groupName": "nrjmx version",
      "automerge": true,
      "automergeType": "pr",
      "pruneBranchAfterAutomerge": true,
      "platformAutomerge": true
    },
    {
        "matchDatasources": ["nrjmx-major-version"],
        "rangeStrategy": "bump"
    },
    {
      "description": "Raise PR for major updates for NRJMX_VERSION",
      "matchDatasources": ["github-releases"],
      "matchPackageNames": ["newrelic/nrjmx"],
      "fileMatch": [
        "^\\.github/workflows/push_pr\\.yml$",
        "^\\.github/workflows/prerelease\\.yml$"
      ],
      "matchUpdateTypes": ["major"],
      "groupName": "nrjmx major version",
      "automergeType": "pr",
      "automerge": false,
      "pruneBranchAfterAutomerge": true
    }
  ]
}
